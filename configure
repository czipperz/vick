#!/bin/sh
# if this is not the first time running this script, run
# `reconfigure` instead

if [ -d vick-build ]; then
    printf "\nUpdating vick-build:\n\n"
    cd vick-build
    git pull || exit $?
else
    printf "Installing vick-build:\n\n"
    git clone https://github.com/czipperz/vick-build
    cd vick-build
fi
# now we are in vick-build

printf "\nBuilding vick-build:\n"
./configure || exit $?
make || exit $?
cd ..

if [ -d vick-package ]; then
    printf "\nUpdating vick-package:\n\n"
    cd vick-package
    git pull || exit $?
else
    printf "\nInstalling vick-package:\n\n"
    git clone https://github.com/czipperz/vick-package \
        || exit $?
    cd vick-package
fi
# now we are in vick-package

printf "\nBuilding vick-package:\n\n"
./configure
make
cd ..

printf "\n\nInstalling vick suite:\n\n"
./vick-package/vick-package vick-package/packagelist install \
                            vick-move vick-insert-mode vick-find \
                            vick-open-line vick-join vick-compile \
                            vick-linear-change-manager vick-page
